:root{
  --bg:#ffffff;
  --muted:#6b7280;
  --line:#ececec;
  --card:#ffffff;
  --radius:16px;
}

*{box-sizing:border-box}

.dash-wrap{ background:var(--bg);}

.dash-header{display:flex; align-items:center; justify-content:space-between; margin-bottom:18px;}
.dash-title{display:flex; align-items:center; gap:10px;}
.dash-title h1{font-size:32px; margin:0; font-weight:500;}
.grid-ico{display:inline-flex; color:#111;}

.dash-grid{
  display:grid;
  grid-template-columns: 1fr 340px;
  gap:14px;
  align-items:start;
}
@media (max-width: 1100px){
  .dash-grid{grid-template-columns:1fr;}
}

/* KPI */
.kpi-row{
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap:12px;
  margin-bottom:14px;
}
@media (max-width: 1100px){
  .kpi-row{grid-template-columns: repeat(2, 1fr);}
}
.kpi-card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:14px;
  padding:12px 12px 10px;
}
.kpi-top{display:flex; align-items:center; justify-content:space-between; margin-bottom:6px;}
.kpi-label{font-size:12px; color:#111; font-weight:600;}
.kpi-info{
  width:18px;height:18px;border-radius:50%;
  display:inline-flex; align-items:center; justify-content:center;
  border:1px solid var(--line); color:var(--muted);
  font-size:11px;
}
.kpi-value{font-size:42px; font-weight:500; line-height:1; color:#111;}

/* Cards */
.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:12px;
  overflow:hidden;
}
.big-card{margin-bottom:14px;}
.card-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 15px;
  border-bottom:1px solid #f3f3f3;
}
.card-head.compact{padding:10px 15px;}
.card-head-left{display:flex; align-items:center; gap:10px;}
.card-title{font-weight:600; color:#111; font-size: 16px;}
.card-body{padding:20px 18px;}

.ico-circle{
  width:34px;height:34px;border-radius:999px;
  display:inline-flex; align-items:center; justify-content:center;
  border:1px solid rgba(0,0,0,.04);
}
.ico-circle.green{background:#eafff1;}
.ico-circle.yellow{background:#fff6da;}
.ico-circle.purple{background:#efeaff;}
.ico-circle.amber{background:#fff1d6;}
.ico-circle.orange{background:#ffe9e0;}

/* Header controls */
.card-head-right{display:flex; align-items:center; gap:10px;}
.select-pill{
  border:1px solid var(--line);
  background:#fff;
  border-radius:10px;
  padding:6px 10px;
  font-size:12px;
}
.select-ghost{
  border:1px solid var(--line);
  background:#fff;
  border-radius:10px;
  padding:6px 10px;
  font-size:12px;
  color:#111;
  cursor:pointer;
  font-family: var(--body-md-reg-font-family);
}

.segmented{
  display:inline-flex;
  border:1px solid var(--line);
  border-radius:12px;
  overflow:hidden;
}
.seg-btn{
  border:0;
  background:#fff;
  padding:8px 12px;
  font-size:12px;
  cursor:pointer;
  color:#111;
}
.seg-btn.active{
  background:#111;
  color:#fff;
}

/* Tabs */
.tab-panel{display:none;}
.tab-panel.active{display:block;}

.chart-wrap{
  border-radius:14px;
  padding:10px;
  border:1px solid #f2f2f2;
  background:#fff;
  height: 320px;
}
.chart-wrap.fixed-h{
  height:260px; /* matches screenshot chart block feel */
}
.chart-wrap canvas{
  width:100% !important;
  height:100% !important;
}

.tab-top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:10px;
}

.tab-filters{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:flex-end;
  flex-wrap:nowrap;
}

.tab-filters .select-ghost{
  height:34px;           /* ✅ same height */
  display:flex;
  align-items:center;
  padding:0 10px;        /* ✅ consistent padding */
  line-height:34px;
}

#soilMetricSelect{ min-width: 180px; }
#soilRangeSelect{ min-width: 120px; }

#shipBarChart { max-height: 190px; }

.muted{color:var(--muted);}
.small{margin-top: 20px;  font-size:14px; text-align: center;}

/* Weather tab matching screenshot */
.wx-kpi-row{
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap:10px;
  margin-bottom:12px;
  font-family: var(--body-md-reg-font-family);
}
@media (max-width: 1100px){
  .wx-kpi-row{grid-template-columns: repeat(2, 1fr);}
}
.wx-kpi{
  background:#fafafa;
  border:1px solid #f1f1f1;
  border-radius:12px;
  padding:10px 12px;
}
.wx-kpi-label{
  font-size:11px;
  color:#8b97a7;
  font-weight:500;
}
.wx-kpi-val{
  margin-top:6px;
  font-size:18px;
  font-weight:600;
  color:#0f172a;
}

.wx-chart-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin:6px 0 10px;
}
.wx-actions{
  display:flex;
  gap:10px;
  align-items:center;
}
.wx-locline{
  margin-top:10px;
  font-size:12px;
}

/* Soil metric grid */
.metric-grid{
  margin-top:12px;
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap:10px;
}
@media (max-width: 1100px){
  .metric-grid{grid-template-columns: repeat(2, 1fr);}
}
.metric-item{
  background:#fafafa;
  border:1px solid #f1f1f1;
  border-radius:12px;
  padding:10px;
  display:grid;
  grid-template-columns: 12px 1fr;
  column-gap:8px;
  align-items:start;
}
.dot{
  width:8px;height:8px;border-radius:50%;
  background:#16a34a;
  margin-top:4px;
}
.metric-name{font-size:11px; color:var(--muted); grid-column:2;}
.metric-value{font-size:13px; font-weight:700; color:#111; grid-column:2;}

/* Map */
.map-wrap {
  width: 100%;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid #eee;
  background: #fff;
}
.farm-map {
  width: 100%;
  height: 320px;
}
.crop-status-panel {
  padding: 14px;
}

/* Bottom row */
.bottom-row{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:14px;
}
@media (max-width: 1100px){
  .bottom-row{grid-template-columns:1fr;}
}

/* Donut */
.donut-wrap{
  position:relative;
  display:flex;
  justify-content:center;
  padding:10px 0 0;
  height: 210px;
  width: 210px;
  margin: 0 auto;
}
.donut-wrap canvas{ width:210px !important; height:210px !important; }
.donut-center{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
}
.donut-total{font-size:26px; font-weight:800; color:#111; margin-top:2px;}

/* Shipment Overview bars (match screenshot) */
.ship-bars {
  display: flex;
  flex-direction: column;
  gap: 18px;
  padding: 8px 6px 18px;
}

.ship-row {
  display: grid;
  grid-template-columns: 90px 1fr;
  gap: 10px;
  align-items: center;
}

.ship-label {
  font-size: 12px;
  font-weight: 600;
  color: #6b7280;
}

.ship-track {
  width: 100%;
  height: 25px;
  background: #f3f4f6;
  border-radius: 999px;
  overflow: hidden;
}

.ship-fill {
  height: 100%;
  width: 0%;
  border-radius: 999px;
  transition: width 0.85s ease;
}

/* Colors matching your legend dots */
.ship-fill.req { background: #FDE68A; }
.ship-fill.pending { background: #FCD34D; }
.ship-fill.transit { background: #60A5FA; }
.ship-fill.del { background: #86EFAC; }
.ship-fill.pay { background: #C4B5FD; }

/* Legends */
.legend-grid{
  margin-top:40px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px 18px;
}
.legend-row{
  margin-top:30px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:8px 12px;
}
.legend-item{
  font-size:12px;
  color:#111;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.legend-dot{
  width:10px; height:10px; border-radius:50%;
  margin-right:8px;
  flex:0 0 auto;
  display:inline-block;
}
.legend-val{color:var(--muted); font-weight:700; margin-left:auto;}

/* Order legend dots */
.dot-req{ background:#ead8b1; }
.dot-transit{ background:#86b7ff; }
.dot-comp{ background:#bff3c7; }
.dot-paid{ background:#c9c3ff; }

/* Shipment legend dots */
.dot-ship-req{ background:#ead8b1; }
.dot-ship-pend{ background:#f5d87a; }
.dot-ship-transit{ background:#86b7ff; }
.dot-ship-del{ background:#bff3c7; }
.dot-ship-pay{ background:#c9c3ff; }

/* Right */
.right-card{position:relative;max-width: 340px; margin-bottom: 12px;}
.date-pill{
  border:1px solid var(--line);
  background:#fff;
  border-radius:10px;
  padding:6px 5px;
  font-size:12px;
  color:#111;
}

.right-list{
  padding:10px 10px 12px;
  display:flex;
  flex-direction:column;
  gap:10px;
  max-height:260px;
  overflow:auto;
}

.task-item{
  display:flex;
  align-items:flex-start;
  gap:10px;
  padding:10px;
  border-bottom:1px solid #f1f1f1;
  border-radius:12px;
  background:#fff;
}
.task-ico{
  width:30px;height:30px;border-radius:30px;
  display:flex; align-items:center; justify-content:center;
  background:#f3f4f6;
  color:#111;
  flex:0 0 auto;
}
.task-title{font-weight:500; font-size:13px; color:#111; line-height:1.2;}
.task-sub{font-size:11px; color:var(--muted); margin-top:2px;}

/* Pie cards */
.pie-wrap{
  padding:12px 12px 14px;
}
.pie-wrap canvas{
  width:180px !important;
  height:180px !important;
  margin: 0 auto;
  display:block;
}
.pie-legend{
  margin-top:10px;
  display:flex;
  flex-direction:column;
  gap:8px;
  font-size:12px;
  color:#111;
}
.pie-leg-item{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.pie-dot{
  width:10px;height:10px;border-radius:50%;
  display:inline-block;
  margin-right:8px;
}
.pie-leg-item b{ color:#111; }

/* Warehouse pie dots */
.dot-wh-req{ background:#fde68a; }
.dot-wh-stored{ background:#6366f1; }
.dot-wh-pay{ background:#60a5fa; }

/* Manufacturer pie dots */
.dot-mfg-req{ background:#60a5fa; }
.dot-mfg-proc{ background:#f59e0b; }
.dot-mfg-pay{ background:#6366f1; }


/* Force pie wrap to stack vertically */
.pie-wrap--col {
  display: flex;
  flex-direction: column;     /* ✅ legend goes below */
  align-items: center;
  justify-content: center;
  gap: 14px;
}

/* Fixed chart box so canvas doesn't stretch weird */
.pie-chart-box {
  width: 180px;
  height: 180px;
  position: relative;
}

/* Make canvas fill the box */
.pie-chart-box canvas {
  width: 100% !important;
  height: 100% !important;
}

/* Legend below chart */
.pie-legend--below {
  width: 100%;
  display: flex;
  justify-content: space-around;
  gap: 10px;
  flex-wrap: wrap;
  text-align: center;
}

/* Each legend item */
.pie-leg-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: #374151;
}

/* Empty state */
.empty-state{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:10px;
}
.empty-state--compact{
  min-height:220px;
}

/* =========================
   Location modal (keep)
   ========================= */
.wx-modal{ position:fixed; inset:0; z-index:9999; }
.wx-modal-backdrop{
  position:absolute; inset:0;
  background:rgba(15, 23, 42, 0.35);
}
.wx-modal-box{
  position:relative;
  width:min(440px, calc(100% - 28px));
  margin:10vh auto 0;
  background:#fff;
  border-radius:18px;
  border:1px solid #eef2f7;
  box-shadow: 0 18px 60px rgba(15, 23, 42, 0.25);
  padding:16px;
}
.wx-modal-title{
  font-size:16px; font-weight:900; color:#0f172a;
}
.wx-modal-sub{
  margin-top:6px;
  font-size:13px;
  color:#475569;
  line-height:1.4;
}
.wx-modal-actions{
  margin-top:14px;
  display:flex; justify-content:flex-end; gap:10px;
}
.wx-btn{
  border-radius:12px;
  padding:10px 12px;
  font-weight:800;
  border:1px solid transparent;
  cursor:pointer;
}
.wx-btn.ghost{
  background:#fff;
  border-color:#e2e8f0;
  color:#0f172a;
}
.wx-btn.primary{
  background:#16a34a;
  color:#fff;
}
.wx-modal-note{ margin-top:10px; font-size:12px; }
